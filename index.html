<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="None">
        
        
        <link rel="shortcut icon" href="img/favicon.ico">
        <title>Retail Flow</title>
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/fontawesome.min.css" rel="stylesheet">
        <link href="css/brands.min.css" rel="stylesheet">
        <link href="css/solid.min.css" rel="stylesheet">
        <link href="css/v4-font-face.min.css" rel="stylesheet">
        <link href="css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/solarized-dark.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body class="homepage">
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href=".">Retail Flow</a>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#retail-flow" class="nav-link">Retail Flow</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#1-about-the-project" class="nav-link">1. About the project</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#2-pipeline-image" class="nav-link">2. Pipeline image</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#3-how-to-start-the-project" class="nav-link">3. How to start the project</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#4-airflow-connections-conn-ids" class="nav-link">4. Airflow connections (Conn IDs)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#5-xcom-backend-minio" class="nav-link">5. XCom backend — MinIO</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#6-mysql-init-files" class="nav-link">6. MySQL init files</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#7-sample-env-file" class="nav-link">7. Sample .env file</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#8-airflow-ui" class="nav-link">8. Airflow UI</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#9-file-and-screenshot-locations" class="nav-link">9. File and screenshot locations</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="retail-flow">Retail Flow</h1>
<h2 id="1-about-the-project">1. About the project</h2>
<p>This project builds a simple data pipeline for retail data.
It does ETL (extract, data quality checks) using pandas.
Airflow runs the pipeline. MinIO is used to store XCom objects (like pandas DataFrames).
MySQL stores results.Postgresql used metadata.</p>
<h2 id="2-pipeline-image">2. Pipeline image</h2>
<p>The pipeline image is here:
docs/images/pipline.png</p>
<p><img alt="Pipline" src="images/pipline.png" /></p>
<h2 id="3-how-to-start-the-project">3. How to start the project</h2>
<ol>
<li>Clone the repo:</li>
</ol>
<pre><code>git clone &lt;repo-url&gt;
cd &lt;repo-name&gt;
</code></pre>
<ol>
<li>
<p>Put the <code>.env</code> file in the project root (see sample below).</p>
</li>
<li>
<p>(Optional) If you have SQL init files for MySQL, put them in mysql-init/ folder.
Docker will run them automatically on MySQL start.</p>
</li>
<li>
<p>Start Airflow and other services:</p>
</li>
<li>
<p>With Astro CLI:</p>
</li>
</ol>
<pre><code>astro dev start
</code></pre>
<ul>
<li>Or with Docker Compose:</li>
</ul>
<pre><code>docker-compose up -d
</code></pre>
<ol>
<li>Open Airflow UI:</li>
<li>
<p>http://localhost:8080</p>
</li>
<li>
<p>Run or check DAGs(before add airflow connections):</p>
</li>
<li>Use Airflow UI or</li>
</ol>
<pre><code>astro dev run &lt;dag_id&gt;
</code></pre>
<h2 id="4-airflow-connections-conn-ids">4. Airflow connections (Conn IDs)</h2>
<p>We use these Airflow connections:</p>
<ul>
<li>
<p>retail — MinIO (S3 API)
<img alt="Retail MinIO Connection" src="images/retail_minio_conn.png" />
<img alt="MinIO Connection Extra Fields" src="images/minio-extra-fields.png" /></p>
</li>
<li>
<p>retailflow — MySQL
<img alt="Retailflow MySQL Connection" src="images/retailflow_mysql_conn.png" /></p>
</li>
</ul>
<p>All connection screenshots are in /docs/images/ folder.</p>
<h2 id="5-xcom-backend-minio">5. XCom backend — MinIO</h2>
<p>We use MinIO as the XCom backend.
Pandas DataFrames and other objects are stored in MinIO.
Airflow keeps only references in XCom.
Screenshot: docs/images/xcom_minio.png</p>
<h2 id="6-mysql-init-files">6. MySQL init files</h2>
<p>If you want MySQL to run SQL files on start, put *.sql files in mysql-init/.
Docker mounts this folder to /docker-entrypoint-initdb.d automatically.</p>
<h2 id="7-sample-env-file">7. Sample <code>.env</code> file</h2>
<pre><code># MySQL
MYSQL_ROOT_PASSWORD=admin
MYSQL_USER=admin
MYSQL_PASSWORD=admin
MYSQL_DATABASE=retailflow

# MinIO / S3 Airflow connection
AIRFLOW_CONN_MINIO_LOCAL='{
    &quot;conn_type&quot;:&quot;aws&quot;,
    &quot;extra&quot;:{
        &quot;aws_access_key_id&quot;:&quot;minioadmin&quot;,
        &quot;aws_secret_access_key&quot;:&quot;minioadmin&quot;,
        &quot;endpoint_url&quot;:&quot;http://minio:9000&quot;
    }
}'

# Object Storage Custom XCom Backend
AIRFLOW__CORE__XCOM_BACKEND=&quot;airflow.providers.common.io.xcom.backend.XComObjectStorageBackend&quot;
AIRFLOW__COMMON_IO__XCOM_OBJECTSTORAGE_PATH=&quot;s3://retail@retail/xcom&quot;
AIRFLOW__COMMON_IO__XCOM_OBJECTSTORAGE_THRESHOLD=&quot;0&quot;
AIRFLOW__COMMON_IO__XCOM_OBJECTSTORAGE_COMPRESSION=&quot;zip&quot;
</code></pre>
<ul>
<li>You can change MYSQL_PASSWORD or other values.</li>
<li>If you want another XCom connection, change AIRFLOW__COMMON_IO__XCOM_OBJECTSTORAGE_PATH.</li>
</ul>
<h2 id="8-airflow-ui">8. Airflow UI</h2>
<h3 id="airflow-dag-view">Airflow dag view</h3>
<p><img alt="Airflow Dag view" src="images/dagview.png" /></p>
<h3 id="airflow-connection-list">Airflow connection list</h3>
<p><img alt="Airflow connection list" src="images/airflow_conn_list.png" /></p>
<h2 id="9-file-and-screenshot-locations">9. File and screenshot locations</h2>
<ul>
<li>Pipeline image: docs/images/pipline.png</li>
<li>MinIO connection screenshot: docs/images/retail_minio_conn.png</li>
<li>MySQL connection screenshot: docs/images/retailflow_mysql_conn.png</li>
<li>XCom MinIO screenshot: docs/images/xcom_minio.png</li>
<li>MySQL init SQL files: mysql-init/</li>
</ul>
<hr /></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = ".",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="js/base.js"></script>
        <script src="search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>

<!--
MkDocs version : 1.6.1
Build Date UTC : 2025-09-10 11:37:14.663283+00:00
-->
